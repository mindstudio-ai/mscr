apiVersion: v1
kind: Action
id: add-update-list-member
serviceId: MailChimp
active: true
metadata:
  name: Add or Update List Member
  description: Add a new subscriber to a MailChimp list or update an existing one
  quickHelp: help.md
configuration:
  - title: List Information
    items:
      - label: List ID
        helpText: The unique ID for the MailChimp list/audience. Find this in your MailChimp account under Audience settings.
        variable: listId
        required: true
        type: text
        placeholder: e.g., abc123def
      - label: Email Address
        helpText: Email address for the subscriber you want to add or update.
        variable: emailAddress
        required: true
        type: text
        placeholder: email@example.com
      - label: Status
        helpText: The subscriber's status in your list.
        variable: status
        required: true
        type: select
        defaultValue: subscribed
        selectOptions:
          options:
            - label: Subscribed
              value: subscribed
            - label: Unsubscribed
              value: unsubscribed
            - label: Pending
              value: pending
            - label: Cleaned
              value: cleaned
            - label: Transactional
              value: transactional
  - title: Subscriber Details
    collapsed: true
    items:
      - label: Merge Fields
        helpText: 'A JSON object containing merge fields like FNAME, LNAME, etc. Example: {"FNAME":"John","LNAME":"Doe"}'
        variable: mergeFields
        required: false
        type: text
        placeholder: '{"FNAME":"John","LNAME":"Doe"}'
      - label: Tags
        helpText: A comma-separated list of tags to apply to this member.
        variable: tags
        required: false
        type: text
        placeholder: new-signup, website-visitor
      - label: Language
        helpText: The subscriber's language preference (e.g., 'en' for English).
        variable: language
        required: false
        type: text
        placeholder: en
      - label: VIP Status
        helpText: Whether the subscriber has VIP status.
        variable: vip
        required: false
        type: select
        defaultValue: 'false'
        selectOptions:
          options:
            - label: No
              value: 'false'
            - label: Yes
              value: 'true'
  - title: Output
    items:
      - label: Output Variable
        helpText: The name of the variable to store the response data.
        variable: outputVariable
        required: true
        type: outputVariableName
