apiVersion: v1
kind: Action
id: create-webhook
serviceId: typeform
active: true
metadata:
  name: Create Webhook
  description: Create or update a webhook for a Typeform form to receive form submission data
  quickHelp: readme.md
configuration:
  - title: Webhook Configuration
    items:
      - label: Form ID
        helpText: The unique ID for your form. Find this in your form URL. For example, in 'https://mysite.typeform.com/to/u6nXL7' the form ID is 'u6nXL7'.
        variable: formId
        required: true
        type: text
        placeholder: u6nXL7
      - label: Webhook Tag
        helpText: A unique name for your webhook. This helps you identify the webhook later.
        variable: tag
        required: true
        type: text
        placeholder: my-webhook
      - label: Webhook URL
        helpText: The URL where Typeform will send data when the form events occur.
        variable: url
        required: true
        type: text
        placeholder: https://example.com/webhook
      - label: Enable Webhook
        helpText: Set to enabled to start receiving webhook events immediately.
        variable: enabled
        required: true
        type: select
        defaultValue: 'true'
        selectOptions:
          options:
            - label: Enabled
              value: 'true'
            - label: Disabled
              value: 'false'
  - title: Event Types
    items:
      - label: Form Response
        helpText: Receive events when a form is completed.
        variable: formResponse
        required: true
        type: select
        defaultValue: 'true'
        selectOptions:
          options:
            - label: Enabled
              value: 'true'
            - label: Disabled
              value: 'false'
      - label: Partial Form Response
        helpText: Receive events for partial form submissions.
        variable: formResponsePartial
        required: true
        type: select
        defaultValue: 'false'
        selectOptions:
          options:
            - label: Enabled
              value: 'true'
            - label: Disabled
              value: 'false'
  - title: Advanced Settings
    collapsed: true
    items:
      - label: Verify SSL
        helpText: Verify SSL certificates when delivering payloads.
        variable: verifySSL
        required: false
        type: select
        defaultValue: 'true'
        selectOptions:
          options:
            - label: Enabled
              value: 'true'
            - label: Disabled
              value: 'false'
      - label: Secret Key
        helpText: If specified, will be used to sign the webhook payload with HMAC SHA256, so you can verify it came from Typeform.
        variable: secret
        required: false
        type: text
  - title: Response Handling
    items:
      - label: Output Variable
        helpText: The name of the variable to store the webhook creation response.
        variable: outputVariable
        required: true
        type: outputVariableName
